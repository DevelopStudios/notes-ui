<div class="navbar">
  <div class="title">
    @if(id === 'dashboard'){
    All Notes
  } @else if(id === 'archived') {
   Archived Notes
  } @else if(id === 'tags'){
    <span class="tag-next">Notes Tagged:</span> {{tagName}}
  }
  </div>
  

  @if(formId && viewportWidth < 770) {
    <div class="editor-header">
    <button class="btn-back" (click)="goBack()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
      Go Back
    </button>
    <div class="editor-actions">
      <button class="btn-text btn-fab" (click)="confirmDelete()">
        <img src="/assets/Border Button [Delete].svg" alt="">
      </button>
      @if(id === 'archived'){
        <button class="btn-text btn-fab" (click)="restoreNote()">
          <img src="/assets/Border Button [Archive].svg" alt="">
        </button>
      } @else {
        <button class="btn-text btn-fab" (click)="confirmArchive()">
          <img src="/assets/Border Button [Archive].svg" alt="">
        </button>
      }
      
      <button class="btn-text btn-cancel" (click)="goBack()">Cancel</button>
      <button class="btn-text btn-save">Save Note</button>
    </div>
  </div>
  <div class="border"></div>
  } @else if(viewportWidth < 770){
    @if(id === 'dashboard'){
      <div class="title-mobile">
        All Notes
      </div>
      } @else if(id === 'tags') {
      <div class="title-mobile">
        <span class="tag-next">Notes Tagged:</span> {{tagName}}
      </div>
  } @else if(id === 'search') {
      <div class="title-mobile">
        Search
      </div>
  } @else if(id === 'archived') {
    <div class="title-mobile">
        Archived
      </div>
  } @else if(id === 'settings') {
    <div class="title-mobile">
        Settings
      </div>
  }
  }
  <div class="navbar-brand">
    <div class="navbar-search">
      <div class="search-container">
        <input type="text" placeholder="Search by title, content, or tags..." (input)="onSearchChange($event)"
          class="search-input">
        <i class="search-icon">
          <img src="/assets/Search.svg" alt="Settings">
        </i>
      </div>
    </div>

    <div class="navbar-actions">
      <button class="icon-button" aria-label="Settings and Profile" (click)="toggleUserSettings()">
        <img src="/assets/Setting.svg" alt="Settings">
      </button>
    </div>
  </div>
</div>
<div class="notes-layout">
  <div class="notes-sidebar" [ngClass]="{'hide' : hideSidebar}">
    
    <div class="inner-container">
         @if(activeRoute === 'search') {
        <div class="mobile-search-container">
          <input type="text" placeholder="Search by title, content, or tags..." (input)="onSearchChange($event)"
            class="search-input">
          <i class="search-icon">
            <img src="/assets/Search.svg" alt="Settings">
          </i>
        </div>
         }
      
      @if(activeRoute !== 'settings') {
      <div class="button-container">
        <button class="add-button" [routerLink]="['/create']">
          + Create New Note
        </button>
      </div>
        <app-note-list></app-note-list>
      } @else if(activeRoute === 'settings') {
        <app-user-settings></app-user-settings>
      }
    </div>
  </div>
          <div class="note-detail">
            <router-outlet></router-outlet>
  </div>    
  <div class="note-actions">
     @if(formId){
      <div class="secondary-actions">
        @if(activeRoute === 'archived'){
          <button type="button" class="btn-outline" (click)="restoreNote()">
          <img src="/assets/Refresh left.svg" class="restore">
          Restore Note
        </button>
        } @else {
          <button type="button" class="btn-outline" (click)="confirmArchive()">
          <img src="/assets/Archive.svg" class="restore">
          Archive Note
        </button>
        }
        

        <button type="button" class="btn-outline" (click)="confirmDelete()">
          <img class="archive" src="/assets/Delete.svg">
          Delete Note
        </button>
      </div>
          }
    </div>
</div>


@if(isDeleteModalOpen) {
  <app-modal (close)="closeModal()">
    
    <div class="delete-header">
       <div class="icon-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
      </div>
      <h3>Delete Note</h3>
    </div>

    <p class="delete-body">
      Are you sure you want to permanently delete this note? This action cannot be undone.
    </p>

    <div class="delete-actions">
      <button class="btn-cancel" (click)="closeModal()">
        Cancel
      </button>
      <button class="btn-delete" (click)="deleteNote()">
        Delete Note
      </button>
    </div>

  </app-modal>
}

@if(isArchiveModalOpen) {
  <app-modal (close)="closeModal()">
    
    <div class="delete-header">
       <div class="icon-wrapper">
        <img src="/assets/Archive.svg" alt="">
      </div>
      <h3>Archive Note</h3>
    </div>

    <p class="delete-body">
      Are you sure you want to archive this note? You can find it in the Archived Notes section and restore it anytime.
    </p>

    <div class="delete-actions">
      <button class="btn-cancel" (click)="closeModal()">
        Cancel
      </button>
      <button class="btn-archive" (click)="archiveNote()">
        Archive Note
      </button>
    </div>

  </app-modal>
}